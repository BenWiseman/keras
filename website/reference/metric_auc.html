<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Approximates the AUC (Area under the curve) of the ROC or PR curves — metric_auc • keras</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Approximates the AUC (Area under the curve) of the ROC or PR curves — metric_auc" />
<meta property="og:description" content="Approximates the AUC (Area under the curve) of the ROC or PR curves" />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">keras</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.4.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/getting_started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_classification.html">Basic Classification</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_text_classification.html">Text Classification</a>
    </li>
    <li>
      <a href="../articles/tutorial_basic_regression.html">Basic Regression</a>
    </li>
    <li>
      <a href="../articles/tutorial_overfit_underfit.html">Overfitting and Underfitting</a>
    </li>
    <li>
      <a href="../articles/tutorial_save_and_restore.html">Save and Restore Models</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Guides (New for TF 2.6)</li>
    <li>
      <a href="../articles/python_subclasses.html">Python Subclasses</a>
    </li>
    <li>
      <a href="../articles/guides/making_new_layers_and_models_via_subclassing.Rmd">Making New Layers and Models via Subclassing</a>
    </li>
    <li>
      <a href="../articles/guides/customizing_what_happens_in_fit.html">Customizing what happens in fit</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Using Keras</li>
    <li>
      <a href="../articles/guide_keras.html">Guide to Keras Basics</a>
    </li>
    <li>
      <a href="../articles/sequential_model.html">Sequential Model in Depth</a>
    </li>
    <li>
      <a href="../articles/functional_api.html">Functional API in Depth</a>
    </li>
    <li>
      <a href="../articles/about_keras_models.html">About Keras Models</a>
    </li>
    <li>
      <a href="../articles/about_keras_layers.html">About Keras Layers</a>
    </li>
    <li>
      <a href="../articles/training_visualization.html">Training Visualization</a>
    </li>
    <li>
      <a href="../articles/applications.html">Pre-Trained Models</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/why_use_keras.html">Why Use Keras?</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Advanced</li>
    <li>
      <a href="../articles/eager_guide.html">Eager Execution</a>
    </li>
    <li>
      <a href="../articles/training_callbacks.html">Training Callbacks</a>
    </li>
    <li>
      <a href="../articles/backend.html">Keras Backend</a>
    </li>
    <li>
      <a href="../articles/custom_layers.html">Custom Layers</a>
    </li>
    <li>
      <a href="../articles/custom_models.html">Custom Models</a>
    </li>
    <li>
      <a href="../articles/saving_serializing.html">Saving and serializing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/learn.html">Learn</a>
</li>
<li>
  <a href="../articles/tools.html">Tools</a>
</li>
<li>
  <a href="../articles/examples/index.html">Examples</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/keras/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Approximates the AUC (Area under the curve) of the ROC or PR curves</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio/keras/blob/master/R/metrics.R'><code>R/metrics.R</code></a></small>
    <div class="hidden name"><code>metric_auc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Approximates the AUC (Area under the curve) of the ROC or PR curves</p>
    </div>

    <pre class="usage"><span class='fu'>metric_auc</span><span class='op'>(</span>
  <span class='va'>...</span>,
  num_thresholds <span class='op'>=</span> <span class='fl'>200L</span>,
  curve <span class='op'>=</span> <span class='st'>"ROC"</span>,
  summation_method <span class='op'>=</span> <span class='st'>"interpolation"</span>,
  thresholds <span class='op'>=</span> <span class='cn'>NULL</span>,
  multi_label <span class='op'>=</span> <span class='cn'>FALSE</span>,
  num_labels <span class='op'>=</span> <span class='cn'>NULL</span>,
  label_weights <span class='op'>=</span> <span class='cn'>NULL</span>,
  from_logits <span class='op'>=</span> <span class='cn'>FALSE</span>,
  name <span class='op'>=</span> <span class='cn'>NULL</span>,
  dtype <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Passed on to the underlying metric. Used for forwards and backwards compatibility.</p></td>
    </tr>
    <tr>
      <th>num_thresholds</th>
      <td><p>(Optional) Defaults to 200. The number of thresholds toa
use when discretizing the roc curve. Values must be &gt; 1.</p></td>
    </tr>
    <tr>
      <th>curve</th>
      <td><p>(Optional) Specifies the name of the curve to be computed, 'ROC'
(default) or 'PR' for the Precision-Recall-curve.</p></td>
    </tr>
    <tr>
      <th>summation_method</th>
      <td><p>(Optional) Specifies the <a href='https://en.wikipedia.org/wiki/Riemann_sum'>Riemann summation method</a> used. 'interpolation' (default)
applies mid-point summation scheme for <code>ROC</code>. For PR-AUC, interpolates
(true/false) positives but not the ratio that is precision (see Davis &amp;
Goadrich 2006 for details); 'minoring' applies left summation for
increasing intervals and right summation for decreasing intervals;
'majoring' does the opposite.</p></td>
    </tr>
    <tr>
      <th>thresholds</th>
      <td><p>(Optional) A list of floating point values to use as the
thresholds for discretizing the curve. If set, the <code>num_thresholds</code>
parameter is ignored. Values should be in <code>[0, 1]</code>. Endpoint thresholds equal
to -epsilon, 1+epsilon for a small positive epsilon value will be
automatically included with these to correctly handle predictions equal to
exactly 0 or 1.</p></td>
    </tr>
    <tr>
      <th>multi_label</th>
      <td><p>boolean indicating whether multilabel data should be
treated as such, wherein AUC is computed separately for each label and then
averaged across labels, or (when FALSE) if the data should be flattened
into a single label before AUC computation. In the latter case, when
multilabel data is passed to AUC, each label-prediction pair is treated as
an individual data point. Should be set to FALSE for multi-class data.</p></td>
    </tr>
    <tr>
      <th>num_labels</th>
      <td><p>(Optional) The number of labels, used when <code>multi_label</code> is
TRUE. If <code>num_labels</code> is not specified, then state variables get created on
the first call to <code>update_state</code>.</p></td>
    </tr>
    <tr>
      <th>label_weights</th>
      <td><p>(Optional) list, array, or tensor of non-negative
weights used to compute AUCs for multilabel data. When <code>multi_label</code> is
TRUE, the weights are applied to the individual label AUCs when they are
averaged to produce the multi-label AUC. When it's FALSE, they are used to
weight the individual label predictions in computing the confusion matrix
on the flattened data. Note that this is unlike class_weights in that
class_weights weights the example depending on the value of its label,
whereas label_weights depends only on the index of that label before
flattening; therefore <code>label_weights</code> should not be used for multi-class
data.</p></td>
    </tr>
    <tr>
      <th>from_logits</th>
      <td><p>boolean indicating whether the predictions (<code>y_pred</code> in
<code>update_state</code>) are probabilities or sigmoid logits. As a rule of thumb,
when using a keras loss, the <code>from_logits</code> constructor argument of the loss
should match the AUC <code>from_logits</code> constructor argument.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>(Optional) string name of the metric instance.</p></td>
    </tr>
    <tr>
      <th>dtype</th>
      <td><p>(Optional) data type of the metric result.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A (subclassed) <code>Metric</code> instance that can be passed directly to
<code><a href='https://generics.r-lib.org/reference/compile.html'>compile(metrics = )</a></code>, or used as a standalone object. See <code><a href='Metric.html'>?Metric</a></code> for
example usage.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The AUC (Area under the curve) of the ROC (Receiver operating
characteristic; default) or PR (Precision Recall) curves are quality measures
of binary classifiers. Unlike the accuracy, and like cross-entropy losses,
ROC-AUC and PR-AUC evaluate all the operational points of a model.</p>
<p>This class approximates AUCs using a Riemann sum. During the metric
accumulation phrase, predictions are accumulated within predefined buckets by
value. The AUC is then computed by interpolating per-bucket averages. These
buckets define the evaluated operational points.</p>
<p>This metric creates four local variables, <code>true_positives</code>, <code>true_negatives</code>,
<code>false_positives</code> and <code>false_negatives</code> that are used to compute the AUC. To
discretize the AUC curve, a linearly spaced set of thresholds is used to
compute pairs of recall and precision values. The area under the ROC-curve is
therefore computed using the height of the recall values by the false
positive rate, while the area under the PR-curve is the computed using the
height of the precision values by the recall.</p>
<p>This value is ultimately returned as <code>auc</code>, an idempotent operation that
computes the area under a discretized curve of precision versus recall values
(computed using the aforementioned variables). The <code>num_thresholds</code> variable
controls the degree of discretization with larger numbers of thresholds more
closely approximating the true AUC. The quality of the approximation may vary
dramatically depending on <code>num_thresholds</code>. The <code>thresholds</code> parameter can be
used to manually specify thresholds which split the predictions more evenly.</p>
<p>For a best approximation of the real AUC, <code>predictions</code> should be distributed
approximately uniformly in the range <code>[0, 1]</code> (if <code>from_logits=FALSE</code>). The
quality of the AUC approximation may be poor if this is not the case. Setting
<code>summation_method</code> to 'minoring' or 'majoring' can help quantify the error in
the approximation by providing lower or upper bound estimate of the AUC.</p>
<p>If <code>sample_weight</code> is <code>NULL</code>, weights default to 1. Use <code>sample_weight</code> of 0
to mask values.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other metrics: 
<code><a href='custom_metric.html'>custom_metric</a>()</code>,
<code><a href='metric_accuracy.html'>metric_accuracy</a>()</code>,
<code><a href='metric_binary_accuracy.html'>metric_binary_accuracy</a>()</code>,
<code><a href='metric_binary_crossentropy.html'>metric_binary_crossentropy</a>()</code>,
<code><a href='metric_categorical_accuracy.html'>metric_categorical_accuracy</a>()</code>,
<code><a href='metric_categorical_crossentropy.html'>metric_categorical_crossentropy</a>()</code>,
<code><a href='metric_categorical_hinge.html'>metric_categorical_hinge</a>()</code>,
<code><a href='metric_cosine_similarity.html'>metric_cosine_similarity</a>()</code>,
<code><a href='metric_false_negatives.html'>metric_false_negatives</a>()</code>,
<code><a href='metric_false_positives.html'>metric_false_positives</a>()</code>,
<code><a href='metric_hinge.html'>metric_hinge</a>()</code>,
<code><a href='metric_kullback_leibler_divergence.html'>metric_kullback_leibler_divergence</a>()</code>,
<code><a href='metric_logcosh_error.html'>metric_logcosh_error</a>()</code>,
<code><a href='metric_mean_absolute_error.html'>metric_mean_absolute_error</a>()</code>,
<code><a href='metric_mean_absolute_percentage_error.html'>metric_mean_absolute_percentage_error</a>()</code>,
<code><a href='metric_mean_iou.html'>metric_mean_iou</a>()</code>,
<code><a href='metric_mean_relative_error.html'>metric_mean_relative_error</a>()</code>,
<code><a href='metric_mean_squared_error.html'>metric_mean_squared_error</a>()</code>,
<code><a href='metric_mean_squared_logarithmic_error.html'>metric_mean_squared_logarithmic_error</a>()</code>,
<code><a href='metric_mean_tensor.html'>metric_mean_tensor</a>()</code>,
<code><a href='metric_mean_wrapper.html'>metric_mean_wrapper</a>()</code>,
<code><a href='metric_mean.html'>metric_mean</a>()</code>,
<code><a href='metric_poisson.html'>metric_poisson</a>()</code>,
<code><a href='metric_precision_at_recall.html'>metric_precision_at_recall</a>()</code>,
<code><a href='metric_precision.html'>metric_precision</a>()</code>,
<code><a href='metric_recall_at_precision.html'>metric_recall_at_precision</a>()</code>,
<code><a href='metric_recall.html'>metric_recall</a>()</code>,
<code><a href='metric_root_mean_squared_error.html'>metric_root_mean_squared_error</a>()</code>,
<code><a href='metric_sensitivity_at_specificity.html'>metric_sensitivity_at_specificity</a>()</code>,
<code><a href='metric_sparse_categorical_accuracy.html'>metric_sparse_categorical_accuracy</a>()</code>,
<code><a href='metric_sparse_categorical_crossentropy.html'>metric_sparse_categorical_crossentropy</a>()</code>,
<code><a href='metric_sparse_top_k_categorical_accuracy.html'>metric_sparse_top_k_categorical_accuracy</a>()</code>,
<code><a href='metric_specificity_at_sensitivity.html'>metric_specificity_at_sensitivity</a>()</code>,
<code><a href='metric_squared_hinge.html'>metric_squared_hinge</a>()</code>,
<code><a href='metric_sum.html'>metric_sum</a>()</code>,
<code><a href='metric_top_k_categorical_accuracy.html'>metric_top_k_categorical_accuracy</a>()</code>,
<code><a href='metric_true_negatives.html'>metric_true_negatives</a>()</code>,
<code><a href='metric_true_positives.html'>metric_true_positives</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tomasz Kalinowski, JJ Allaire, François Chollet,  RStudio,  Google.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


